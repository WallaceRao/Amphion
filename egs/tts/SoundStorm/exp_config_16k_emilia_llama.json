{
    // "base_config": "config/tts.json",
    "model_type": "SoundStorm",
    "dataset": ["emilia"],
    "preprocess": {
        "hop_size": 320,
        "sample_rate": 16000,
        "processed_dir": "",
        "valid_file": "valid.json",
        "train_file": "train.json",
        "use_phone_cond": false
    },
    "model": {
        "soundstorm": {
            "num_quantizer": 8,    // number of quantizers, 8 for 16KHz, 12 for 24KHz
            "hidden_size": 1024,
            "num_layers": 16,
            "num_heads": 16,
            "codebook_size": 1024,
            "cfg_scale": 0.15,
            "mask_layer_schedule": "linear",
            "use_cond_code": true,
            "cond_codebook_size": 2048,
            "cond_dim":1024,
            "use_llama_style": true,
            "use_phone_cond": false,
            "use_pretrained_model": false
        },
        "kmeans": {
            "type": "kmeans_ema",
            "stat_mean_var_path": "/mnt/bn/yuacnwang-speech/ckpt/semantic_kmeans/mls_wav2vec2bert_stats.pt",   // https://huggingface.co/Hecheng0625/semantic_kmeans/tree/main
            "kmeans": {
                "codebook_size": 2048,
                "codebook_dim": 1024,
                "kmeans_init": true,
                "kmeans_iters": 10,
                "decay": 0.8,
                "eps": 1e-5
            },
            "pretrained_path": "/mnt/bn/yuacnwang-speech/ckpt/semantic_kmeans/emilia_1k_2048_15k/model.safetensors"   // https://huggingface.co/Hecheng0625/semantic_kmeans/tree/main
        },
        "codec": {
            "encoder": {
                "d_model": 96,
                "up_ratios": [4, 4, 4, 5],
                "out_channels": 256,
                "use_tanh": false,
                "pretrained_path": "/mnt/bn/yuacnwang-speech/ckpt/codec/codec_dac_vocos_16K_320hopsize_8vq/pytorch_model.bin"   // https://huggingface.co/Hecheng0625/codec_16k_320hopsize_8layer_vocos/tree/main
            },
            "decoder": {
                "in_channel": 256,
                "upsample_initial_channel": 1536,
                "up_ratios": [5, 4, 4, 4],
                "num_quantizers": 8,
                "codebook_size": 1024,
                "codebook_dim": 8,
                "quantizer_type": "fvq",
                "quantizer_dropout": 0.5,
                "commitment": 0.25,
                "codebook_loss_weight": 1.0,
                "use_l2_normlize": true,
                "codebook_type": "euclidean",
                "kmeans_init": false,
                "kmeans_iters": 10,
                "decay": 0.8,
                "eps": 0.5,
                "threshold_ema_dead_code": 2,
                "weight_init": false,
                "use_vocos": true,
                "vocos_dim": 512,
                "vocos_intermediate_dim": 4096,
                "vocos_num_layers": 24,
                "n_fft": 1280,
                "hop_size": 320,
                "padding": "same",
                "pretrained_path": "/mnt/bn/yuacnwang-speech/ckpt/codec/codec_dac_vocos_16K_320hopsize_8vq/pytorch_model_1.bin"   // https://huggingface.co/Hecheng0625/codec_16k_320hopsize_8layer_vocos/tree/main
            }
        }
    },
    "log_dir": "/mnt/bn/yuacnwang-speech/ckpt/soundstorm",
    "train": {
        "max_epoch": 0,
        "use_dynamic_batchsize": true,
        "max_tokens": 3200000,
        "max_sentences": 32,
        "lr_warmup_steps": 32000,
        "lr_scheduler": "inverse_sqrt",
        "num_train_steps": 800000,
        "adam": {
            "lr": 1e-4
        },
        "ddp": false,
        "random_seed": 114,
        "batch_size": 10,
        "epochs": 5000,
        "max_steps": 1000000,
        "total_training_steps": 800000,
        "save_summary_steps": 500,
        "save_checkpoints_steps": 1000,
        "valid_interval": 2000,
        "keep_checkpoint_max": 100,
        "gradient_accumulation_step": 1,
        "tracker": ["tensorboard"],
        "save_checkpoint_stride": [1],
        "keep_last": [10],
        "run_eval": [true],
        "dataloader": {
          "num_worker": 4,
          "pin_memory": true
        },
        "use_emilia_dataset": true
    }
}